(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(n,e,t){},104:function(n,e,t){},113:function(n,e){},115:function(n,e){},149:function(n,e){},150:function(n,e){},199:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(28),o=t.n(i),c=(t(102),t(43)),u=t.n(c),l=t(29),s=t(84),f=t(85),d=t(86),p=t(94),m=t(87),v=t(95),h=t(88),b=t.n(h),x=(t(104),function(){return a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),a.a.createElement("span",null,"2048"))}),g=t(6),y=t(7);function E(){var n=Object(g.a)(["\n  background: #bbada0;\n  color: #f9f6f2;\n  height: 20px;\n  margin: 10px;\n  cursor: pointer;\n  border-radius: 3px;\n  text-align: center;\n  font-weight: bold;\n  font-size: 15px;\n"]);return E=function(){return n},n}function O(){var n=Object(g.a)(["\n  background: rgba(252,234,187,.5);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  border-radius: 10px;\n  height: 450px;\n  position: absolute;\n  width: 450px;\n  padding: 5px;\n\n"]);return O=function(){return n},n}var w=y.a.div(O()),G=y.a.button(E());function k(){var n=Object(g.a)(["\n  \n  transform: translate(","px, ","px);\n  text-align: center;\n  line-height: 100px;\n  background-color: ",";\n  position: absolute;\n  transition-property: transform;\n  transition: 100ms ease-in-out;\n  color: #6a4e4e;\n  font-weight: 900;\n  font-size: ","px;\n"]);return k=function(){return n},n}function j(){var n=Object(g.a)(["\n  margin: 5px;\n  background-color: rgba(238, 228, 218, 0.35);\n  height: 100px;\n  width: 100px;\n  border-radius: 5px;\n"]);return j=function(){return n},n}function I(){var n=Object(g.a)(["\n  background-color: transparent;\n"]);return I=function(){return n},n}function N(){var n=Object(g.a)(["\n  align-content: space-between;\n  background-color: #bbada0;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  height: 450px;\n  justify-content: space-between;\n  padding: 5px;\n  position: absolute;\n  width: 450px;\n"]);return N=function(){return n},n}function D(){var n=Object(g.a)(["\n \n  margin-left: auto;\n  margin-right: auto;\n  height: 475px;\n  position: relative;\n  width: 475px;\n"]);return D=function(){return n},n}var S=[];S.length=16,S.fill(null);var L=y.a.div(D()),T=y.a.div(N()),W=Object(y.a)(T)(I()),M=y.a.div(j()),A=Object(y.a)(M)(k(),function(n){return 113*n.x},function(n){return 113*n.y},function(n){var e=n.value;return C(e)},function(n){var e=n.value;return e<100?66:e<1e3?47:e<1e4?40:30}),C=function(n){if(0===n)return"transparent";var e=Math.min(16,Math.log2(n));return"hsl(0, ".concat(R(e),"%, ").concat(U(e),"%);")},R=function(n){return Math.floor(6.25*n)},U=function(n){return 100-Math.floor(3.125*n)},z=function(n){var e=n.cells,t=n.isWin,r=n.continueGame;return a.a.createElement(L,null,a.a.createElement(T,null,S.map(function(n,e){return a.a.createElement(M,{key:e})})),t?a.a.createElement(w,null,a.a.createElement("p",null,"You Win!"),a.a.createElement(G,{onClick:r},"continue game")):a.a.createElement(W,null,e.map(function(n){var e=n.x,t=n.y,r=n.value,i=n.id;return a.a.createElement(A,{key:i,x:e,y:t,value:r},r)})))};function K(){var n=Object(g.a)(["\n  margin-top: 16px;\n  align-self: center;\n  position: relative;\n  display: inline-block;\n  background: #bbada0;\n  padding: 15px 25px;\n  font-size: 20px;\n  height: 25px;\n  line-height: 3px;\n  font-weight: bold;\n  border-radius: 3px;\n  color: white; \n  text-align: center;\n    \n"]);return K=function(){return n},n}function F(){var n=Object(g.a)(["\n  background: #8f7a66;\n  color: #f9f6f2;\n  height: 40px;\n  margin: 10px;\n  cursor: pointer;\n  border-radius: 3px;\n  text-align: center;\n  font-weight: bold;\n  font-size: 25px;\n    :focus {\n      border: 1px solid #8f7a66;\n    }\n  \n"]);return F=function(){return n},n}function H(){var n=Object(g.a)(["\n  display: flex;\n  margin-right: auto;\n  margin-left: auto;\n  justify-content: space-between;\n  align-items: center;\n  height: 100px;\n  width: 475px;\n\n"]);return H=function(){return n},n}var Y=y.a.div(H()),P=y.a.button(F()),V=y.a.div(K()),J=function(n){var e=n.score,t=n.restartGame;return a.a.createElement(Y,null,a.a.createElement(P,{onClick:t},"New Game"),a.a.createElement(V,null," Score ",a.a.createElement("p",null,e)))},B=t(91),q={MOVING:"MOVING",IDLE:"IDLE",DYING:"DYING",INCREASE:"INCREASE"},Q=function(n,e){return Math.floor(Math.random()*(e-n)+n)},X=function(n,e,t){return{x:n,y:e,value:t,id:Object(B.generate)(16),state:q.IDLE,increased:!1}},Z=function(){return Q(0,4)},$=function(){var n=X(Z(),Z(),2),e=X(Z(),Z(),2);return n.x===e.x&&n.y===e.y&&(n.x=0===n.x?1:n.x-1),[n,e]},_=t(8),nn=t.n(_),en=t(92),tn={UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"},rn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=Object(en.cloneDeep)(n),r=Array.from(new Array(4),function(){return Array.from(new Array(4),function(){return 0})});t.forEach(function(n){r[n.y][n.x]=n}),function(n,e){switch(e){case tn.LEFT:nn()(n);break;case tn.DOWN:nn()(n),nn()(n);break;case tn.RIGHT:nn()(n),nn()(n),nn()(n)}}(r,e);for(var a=0;a<4;a++)for(var i=0;i<4;i++)0!==r[a][i]&&an(r,i,a);!function(n,e){switch(e){case tn.LEFT:nn()(n),nn()(n),nn()(n);break;case tn.DOWN:nn()(n),nn()(n);break;case tn.RIGHT:nn()(n)}}(r,e);for(var o=0;o<4;o++)for(var c=0;c<4;c++)0!==r[o][c]&&(r[o][c].y=o,r[o][c].x=c);return t.filter(function(n){return null!=n.by}).forEach(function(n){n.x=n.by.x,n.y=n.by.y,delete n.by}),t};function an(n,e,t){for(var r=t-1,a=t;r>=0;){if(0===n[r][e])n[r][e]=n[a][e],n[a][e].state=q.MOVING,n[a][e]=0,a=r;else{if(n[r][e].value!==n[a][e].value||n[r][e].state!==q.IDLE&&n[r][e].state!==q.MOVING)break;n[r][e].state=q.DYING,n[r][e].by=n[a][e],n[a][e].state=q.INCREASE,n[r][e]=n[a][e],n[a][e]=0,a=r}r-=1}}var on=t(93),cn=function(n){var e=new Set;if(n.forEach(function(n){e.add(4*n.x+n.y)}),16!==e.size){var t,r,a=e.size;do{var i=4*(t=Q(0,4))+(r=Q(0,4));e.add(i)}while(a===e.size);return[].concat(Object(on.a)(n),[X(t,r,2)])}},un=function(n){return new Promise(function(e){return setTimeout(e,n)})},ln=function(n){function e(n){var t;return Object(f.a)(this,e),(t=Object(p.a)(this,Object(m.a)(e).call(this,n))).KeyCodeToDirection={37:tn.LEFT,38:tn.UP,39:tn.RIGHT,40:tn.DOWN},t.getInitialState=function(){return{cells:$(),score:0,isWin:!1,isGameOver:!1}},t.restartGame=function(){t.setState(t.getInitialState())},t.continueGame=function(){t.setState({isWin:!1})},t.handleKeyUp=function(){var n=Object(s.a)(u.a.mark(function n(e){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.keyCode,t.state.isGameOver&&t.restartGame(),[37,38,39,40].includes(r)&&t.setState(function(n){return Object(l.a)({},n,{cells:rn(n.cells,t.KeyCodeToDirection[r])})}),n.next=5,un(100);case 5:t.setState(function(n){return t.calculateNewState(n)}),t.setState(function(n){return Object(l.a)({},n,{cells:cn(n.cells),isGameOver:!cn(n.cells)})});case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),t.state=t.getInitialState(),t}return Object(v.a)(e,n),Object(d.a)(e,[{key:"calculateNewState",value:function(n){var e=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(n){return n.state!==q.DYING}).map(function(n){return n.state===q.INCREASE&&(n.value*=2,n.increased=!0),n.state=q.IDLE,n})}(n.cells),t=e.filter(function(n){return n.increased}).reduce(function(n,e){return n+e.value},n.score),r=e.map(function(n){return n.increased=!1,n}),a=r.some(function(n){return 2048===n.value});return Object(l.a)({},n,{cells:r,score:t,isWin:a})}},{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentDidUpdate",value:function(n,e){e.isGameOver&&!this.state.isGameOver&&document.addEventListener("keyup",this.handleKeyUp),!e.isGameOver&&this.state.isGameOver&&document.removeEventListener("keyup",this.handleKeyUp)}},{key:"componentWillMount",value:function(){document.removeEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){var n=this.state,e=n.cells,t=n.score,r=n.isGameOver,i=n.isWin;return a.a.createElement("div",{className:"App"},a.a.createElement(x,null),a.a.createElement(J,{score:t,restartGame:this.restartGame}),r?a.a.createElement("h1",null,"Game Over"):a.a.createElement(z,{cells:e,isWin:i,continueGame:this.continueGame}))}}]),e}(a.a.Component);o.a.render(a.a.createElement(ln,null),document.getElementById("root"))},88:function(n,e,t){n.exports=t.p+"static/media/logo.5d5d9eef.svg"},97:function(n,e,t){n.exports=t(199)}},[[97,1,2]]]);
//# sourceMappingURL=main.9c072f95.chunk.js.map